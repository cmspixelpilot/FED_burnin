<?xml version='1.0' encoding='utf-8'?>
<HwDescription>
    <AMC13>
        <connection id="T1" uri="chtcp-2.0://cmsuppixch:10203?target=amc13T101:50001" address_table="file://settings/AMC13XG_T1.xml" />
        <connection id="T2" uri="chtcp-2.0://cmsuppixch:10203?target=amc13T201:50001" address_table="file://settings/AMC13XG_T2.xml" />
        <AMCmask enable="3,4,5,7,8,9,10" />
        <!--This is used to send a calibration Trigger via the AMC13s internal BGO mechanism, 0x2c is the command configured as BGO15 
             on the TTCci - repeat is obvious, prescale is in orbits, the bx is selected such that it occurs 98 BX before the local
             L1A which is periodic at BX500 every orbit-->
        <BGO command="0x2c" repeat="1" prescale="0" bx="380" />
        <!-- Local enables Local L1A, mode 0 means a trigger every orbit at BX500, rate is 1 for every orbit and burst is 1 
             for 1 trigger when sending burst (equivalent to single trigger -->
        <Trigger local="1" mode="0" rate="1" burst="1" rules="0" />
        <!--<Register tounge="T1" name="test.test">0</Register>-->
        <TTCSimulator>0</TTCSimulator>
    </AMC13>
    <PixFED Id="0" boardType="CTA">
        <connection id="board0" uri="chtcp-2.0://cmsuppixch:10203?target=devfed:50001" address_table="file://settings/address_table.xml" />
        <!-- Trigger & Acquisition -->
        <!--Used to set the CLK input to the TTC clock from the BP - 3 is XTAL, 0 is BP-->
        <Register name="ctrl.ttc_xpoint_A_out3">0</Register>
        <!--0: real data, 1: constants after TBM fifo, 2: pattern before TBM fifo-->
        <Register name="pixfed_ctrl_regs.data_type">0</Register>
        <!--1: TBM fifo, 2: Slink FIFO, 3: FEROL-->
        <Register name="pixfed_ctrl_regs.acq_ctrl.acq_mode">2</Register>

        <!--SLINK-->
        <Register name="pixfed_ctrl_regs.slink_ctrl.privateEvtNb">0x00</Register>
        <Register name="pixfed_ctrl_regs.slink_ctrl.slinkFormatH_source_id">0x1</Register>
        <Register name="pixfed_ctrl_regs.slink_ctrl.slinkFormatH_FOV">0xe</Register>
        <Register name="pixfed_ctrl_regs.slink_ctrl.slinkFormatH_Evt_ty">0xa</Register>
        <Register name="pixfed_ctrl_regs.slink_ctrl.slinkFormatH_Evt_stat">0xf</Register>

        <!-- TBM MASK -->
        <Register name="pixfed_ctrl_regs.TBM_MASK_1">0xFFFFFF3F</Register>
        <Register name="pixfed_ctrl_regs.TBM_MASK_2">0xFFFFFFFF</Register>
        <Register name="pixfed_ctrl_regs.tbm_trailer_status_mask">0x00</Register>
        <!--<Register name="pixfed_ctrl_regs.PACKET_NB">10</Register>-->

        <!-- FITELS -->
        <Fitel_Files path="./settings/" />
        <!--<Fitel FMC="0" Id="0" file="FMCFITEL.txt" Enable="" />-->
        <!--<Fitel FMC="0" Id="1" file="FMCFITEL.txt" Enable="1" />-->
        <Fitel FMC="1" Id="0" file="FMCFITEL.txt" Enable=""/>
        <Fitel FMC="1" Id="1" file="FMCFITEL.txt" Enable="9"/>
    </PixFED>
</HwDescription>

<Settings>
    <!--Setting name="NTBM">2</Setting-->
    <!--<Setting name="ChannelOfInterest">0</Setting>-->
    <!-- 0 indexed -->
    <Setting name="ChannelOfInterest">3</Setting>
    <!-- 0 indexed -->
    <Setting name="ROCOfInterest">1</Setting>
    <Setting name="BlockSize">512</Setting>
    <Setting name="NEventsCommissioningMode">6</Setting>
    <!--if set to 0, loop will run forever-->
    <Setting name="NAcq">100</Setting>
</Settings>
